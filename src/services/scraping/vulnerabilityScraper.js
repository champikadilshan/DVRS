// src/services/scraping/vulnerabilityScraper.js
import axios from 'axios';

const SCRAPING_API_URL = 'http://localhost:3001/api';

export const vulnerabilityScraper = {
  async scrapeVulnerabilityDetails(uri) {
    console.log('Scraping vulnerability details for:', uri);
    try {
      const response = await axios.post(`${SCRAPING_API_URL}/scrape`, {
        url: uri
      });

      console.log('Scraping response:', response.data);
      return response.data;
    } catch (error) {
      console.error('Error in scrapeVulnerabilityDetails:', error);
      throw error;
    }
  },

  async scrapeStackOverflow(query) {
    console.log('Scraping Stack Overflow for:', query);
    try {
      const response = await axios.post(`${SCRAPING_API_URL}/scrape/stackoverflow`, {
        query
      });
      return response.data;
    } catch (error) {
      console.error('Error in scrapeStackOverflow:', error);
      throw error;
    }
  },

  // NEW: Add Snyk scraping method
  async scrapeSnyk(query) {
    console.log('Scraping Snyk for:', query);
    try {
      const response = await axios.post(`${SCRAPING_API_URL}/scrape/snyk`, {
        query
      });
      return response.data;
    } catch (error) {
      console.error('Error in scrapeSnyk:', error);
      throw error;
    }
  }
};